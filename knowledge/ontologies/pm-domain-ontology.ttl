# Santiago PM Domain Ontology
# Version: 1.0.0
# Created: 2025-01-16
# License: CC BY 4.0
#
# A formal ontology for product management, agile development, and knowledge capture
# based on the Santiago PM methodology. Reuses W3C standards (PROV-O, ORG, DCMI) where
# applicable and defines custom vocabulary for PM-specific concepts.
#
# Design Philosophy:
# - Reuse before reinvent: Build on W3C Recommendations (PROV-O, ORG)
# - Interoperability: Use standard namespaces for metadata (DCMI)
# - Extensibility: Support domain-specific extensions via subclassing
# - Provenance-first: Track complete lifecycle of all artifacts
# - Bootstrap-ready: Ontology structure mirrors Santiago PM folder structure

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .

# W3C Standard Ontologies (Reused)
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .

# Santiago PM Ontology (Custom)
@prefix nusy: <https://nusy.ai/pm#> .
@prefix kg: <https://nusy.ai/kg#> .

# ============================================================================
# ONTOLOGY METADATA
# ============================================================================

<https://nusy.ai/pm#>
    a owl:Ontology ;
    rdfs:label "Santiago PM Domain Ontology"@en ;
    rdfs:comment """A formal ontology for product management based on the Santiago PM 
    methodology. Combines W3C standards (PROV-O for provenance, ORG for roles) with 
    custom vocabulary for Features, Issues, Experiments, Notes, and semantic relationships. 
    Designed to support bootstrap capability where Santiago PM learns from its own structure."""@en ;
    dcterms:created "2025-01-16"^^xsd:date ;
    dcterms:creator "Santiago PM Team" ;
    dcterms:license <https://creativecommons.org/licenses/by/4.0/> ;
    owl:versionInfo "1.0.0" ;
    owl:imports <http://www.w3.org/ns/prov-o#> ,
                <http://www.w3.org/ns/org#> ,
                <http://purl.org/dc/terms/> ;
    skos:note """This ontology follows a layered architecture:
    - Layer 1: W3C Foundation (PROV-O, ORG, DCMI)
    - Layer 2: Santiago PM Base (Artifact, Status, Role)
    - Layer 3: PM Domain Specifics (Feature, Issue, Experiment, Note, Plan, Quality Assessment)
    - Layer 4: PM Behaviors (20 core activities as MCP tools)
    - Layer 5: Agile/Continuous Discovery Extensions (Lean UX, Story Mapping)"""@en .

# ============================================================================
# LAYER 1: BASE CLASSES (Reuse W3C Standards)
# ============================================================================

# PROV-O provides: prov:Entity, prov:Activity, prov:Agent, prov:Plan, prov:Role
# ORG provides: org:Role, org:Organization, org:Membership
# DCMI provides: metadata properties (dcterms:created, dcterms:creator, etc.)

# ============================================================================
# LAYER 2: SANTIAGO PM BASE CLASSES
# ============================================================================

kg:Artifact
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf prov:Entity ;
    rdfs:label "Artifact"@en ;
    rdfs:comment """Base class for all Santiago PM artifacts. Every artifact is a PROV-O 
    Entity (can be used/generated by activities, has provenance) and has standard metadata 
    (creator, creation time). Subclasses represent domain-specific artifact types like 
    Features, Issues, Experiments."""@en ;
    skos:example """
    :my-feature a nusy:Feature , kg:Artifact ;
        dcterms:title \"User Authentication\" ;
        dcterms:created \"2025-01-16T10:00:00Z\"^^xsd:dateTime ;
        dcterms:creator :alice ;
        prov:wasGeneratedBy :feature-creation-activity ;
        nusy:hasStatus nusy:StatusValue-InProgress .
    """@en .

# ============================================================================
# LAYER 3: PM DOMAIN-SPECIFIC ARTIFACT TYPES
# ============================================================================

# -----------------------------------------------------------------------------
# Features (Cargo Manifests)
# -----------------------------------------------------------------------------

nusy:Feature
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf kg:Artifact ;
    rdfs:label "Feature"@en ;
    rdfs:comment """A product capability specified using BDD (Behavior-Driven Development) 
    format with Gherkin scenarios. Features represent WHAT needs to be built from the 
    user's perspective. Corresponds to 'Cargo Manifests' in Santiago PM nautical terminology. 
    Includes hypothesis, acceptance criteria, scenarios, and links to related issues/experiments."""@en ;
    dcterms:source "santiago-pm/cargo-manifests/" ;
    skos:example """
    :user-login-feature a nusy:Feature ;
        dcterms:title \"As a user I can log in securely\" ;
        dcterms:description \"Users authenticate using email and password with MFA support\" ;
        nusy:hypothesis \"Requiring MFA will increase security without harming conversion\" ;
        nusy:acceptanceCriteria \"Login succeeds with valid credentials\", 
                                \"Login fails with invalid credentials\",
                                \"MFA prompt appears for first-time login\" ;
        nusy:belongsToEpic :authentication-epic ;
        nusy:hasIssue :bug-login-timeout ;
        nusy:testsBehavior :login-behavior ;
        prov:wasGeneratedBy :sprint-planning-activity ;
        nusy:hasStatus nusy:StatusValue-InProgress .
    """@en .

nusy:hypothesis
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:Feature ;
    rdfs:range xsd:string ;
    rdfs:label "hypothesis"@en ;
    rdfs:comment "Testable assumption underlying the feature. Used for hypothesis-driven development."@en .

nusy:acceptanceCriteria
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:Feature ;
    rdfs:range xsd:string ;
    rdfs:label "acceptance criteria"@en ;
    rdfs:comment "Conditions that must be satisfied for feature to be considered complete. Multiple values allowed."@en .

nusy:belongsToEpic
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Feature ;
    rdfs:range nusy:Epic ;
    rdfs:label "belongs to epic"@en ;
    rdfs:comment "Feature is part of a larger epic or feature collection."@en ;
    owl:inverseOf nusy:hasFeature .

nusy:hasIssue
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Feature ;
    rdfs:range nusy:Issue ;
    rdfs:label "has issue"@en ;
    rdfs:comment "Feature is blocked by or related to this issue/bug."@en ;
    owl:inverseOf nusy:relatedFeature .

nusy:testsBehavior
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Feature ;
    rdfs:range nusy:PMBehavior ;
    rdfs:label "tests behavior"@en ;
    rdfs:comment "BDD feature tests this PM behavior/capability."@en ;
    rdfs:subPropertyOf prov:wasInfluencedBy .

nusy:Epic
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf kg:Artifact ;
    rdfs:label "Epic"@en ;
    rdfs:comment "Large body of work spanning multiple features. Represents strategic initiative or capability."@en .

# -----------------------------------------------------------------------------
# Issues (Ship's Logs)
# -----------------------------------------------------------------------------

nusy:Issue
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf kg:Artifact ;
    rdfs:label "Issue"@en ;
    rdfs:comment """Bug, defect, or impediment requiring resolution. Issues track problems 
    encountered during development or production. Corresponds to 'Ship's Logs' in Santiago PM 
    nautical terminology. Includes severity, assignees, reproduction steps, and links to 
    affected features."""@en ;
    dcterms:source "santiago-pm/ships-logs/" ;
    skos:example """
    :bug-login-timeout a nusy:Issue ;
        dcterms:title \"Login times out after 5 seconds\" ;
        dcterms:description \"Users experience timeout when authenticating from slow networks\" ;
        nusy:severity nusy:Severity-High ;
        nusy:assignedTo :bob ;
        nusy:relatedFeature :user-login-feature ;
        nusy:reproducedBy :experiment-slow-network-test ;
        prov:wasGeneratedBy :bug-reporting-activity ;
        nusy:hasStatus nusy:StatusValue-Open .
    """@en .

nusy:severity
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Issue ;
    rdfs:range nusy:SeverityValue ;
    rdfs:label "severity"@en ;
    rdfs:comment "Impact level of the issue (Critical, High, Medium, Low)."@en .

nusy:assignedTo
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Issue ;
    rdfs:range foaf:Agent ;
    rdfs:label "assigned to"@en ;
    rdfs:comment "Agent responsible for resolving this issue."@en ;
    rdfs:subPropertyOf prov:wasAssociatedWith .

nusy:relatedFeature
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Issue ;
    rdfs:range nusy:Feature ;
    rdfs:label "related feature"@en ;
    rdfs:comment "Feature affected by this issue."@en ;
    owl:inverseOf nusy:hasIssue .

nusy:reproducedBy
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Issue ;
    rdfs:range nusy:Experiment ;
    rdfs:label "reproduced by"@en ;
    rdfs:comment "Experiment that confirms/reproduces this issue."@en .

# Severity values (controlled vocabulary)
nusy:SeverityValue a rdfs:Class , owl:Class ;
    rdfs:label "Severity Value"@en ;
    rdfs:comment "Controlled vocabulary for issue severity levels."@en .

nusy:Severity-Critical a nusy:SeverityValue ; rdfs:label "Critical"@en .
nusy:Severity-High a nusy:SeverityValue ; rdfs:label "High"@en .
nusy:Severity-Medium a nusy:SeverityValue ; rdfs:label "Medium"@en .
nusy:Severity-Low a nusy:SeverityValue ; rdfs:label "Low"@en .

# -----------------------------------------------------------------------------
# Experiments (Voyage Trials)
# -----------------------------------------------------------------------------

nusy:Experiment
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf kg:Artifact , prov:Activity ;
    rdfs:label "Experiment"@en ;
    rdfs:comment """Hypothesis-driven trial to validate assumptions or test solutions. 
    Experiments are dual-natured: both an artifact (entity) and an activity (process). 
    Corresponds to 'Voyage Trials' in Santiago PM nautical terminology. Includes hypothesis, 
    success criteria, metrics, and phases (design, execution, analysis)."""@en ;
    dcterms:source "santiago-pm/voyage-trials/" ;
    skos:note "Experiments are both prov:Entity (can be referenced, versioned) and prov:Activity (occur over time, use resources)."@en ;
    skos:example """
    :experiment-mfa-impact a nusy:Experiment ;
        dcterms:title \"A/B test MFA requirement on conversion rate\" ;
        nusy:hypothesis \"Requiring MFA will decrease conversion by <5%\" ;
        nusy:successCriteria \"Conversion rate drops less than 5%\", 
                             \"Security incidents decrease by >50%\" ;
        nusy:metrics nusy:Metric-ConversionRate, nusy:Metric-SecurityIncidents ;
        nusy:phase nusy:Phase-Execution ;
        prov:used :user-traffic-data ;
        prov:wasAssociatedWith :alice ;
        nusy:testsFeature :user-login-feature ;
        prov:startedAtTime \"2025-01-10T00:00:00Z\"^^xsd:dateTime ;
        prov:endedAtTime \"2025-01-17T00:00:00Z\"^^xsd:dateTime ;
        nusy:hasStatus nusy:StatusValue-InProgress .
    """@en .

nusy:successCriteria
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:Experiment ;
    rdfs:range xsd:string ;
    rdfs:label "success criteria"@en ;
    rdfs:comment "Measurable conditions defining experiment success. Multiple values allowed."@en .

nusy:metrics
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Experiment ;
    rdfs:range nusy:Metric ;
    rdfs:label "metrics"@en ;
    rdfs:comment "Quantitative measures tracked during experiment."@en .

nusy:phase
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Experiment ;
    rdfs:range nusy:ExperimentPhase ;
    rdfs:label "phase"@en ;
    rdfs:comment "Current phase of experiment lifecycle (Design, Execution, Analysis, Complete)."@en .

nusy:testsFeature
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Experiment ;
    rdfs:range nusy:Feature ;
    rdfs:label "tests feature"@en ;
    rdfs:comment "Feature being validated by this experiment."@en ;
    owl:inverseOf nusy:testedByExperiment .

nusy:testedByExperiment
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Feature ;
    rdfs:range nusy:Experiment ;
    rdfs:label "tested by experiment"@en ;
    owl:inverseOf nusy:testsFeature .

# Experiment phases (controlled vocabulary)
nusy:ExperimentPhase a rdfs:Class , owl:Class ;
    rdfs:label "Experiment Phase"@en ;
    rdfs:comment "Lifecycle phases for experiments."@en .

nusy:Phase-Design a nusy:ExperimentPhase ; rdfs:label "Design"@en .
nusy:Phase-Execution a nusy:ExperimentPhase ; rdfs:label "Execution"@en .
nusy:Phase-Analysis a nusy:ExperimentPhase ; rdfs:label "Analysis"@en .
nusy:Phase-Complete a nusy:ExperimentPhase ; rdfs:label "Complete"@en .

# Metrics (extensible)
nusy:Metric a rdfs:Class , owl:Class ;
    rdfs:label "Metric"@en ;
    rdfs:comment "Quantitative measure. Subclass to define domain-specific metrics."@en .

nusy:Metric-ConversionRate a nusy:Metric ; rdfs:label "Conversion Rate"@en .
nusy:Metric-SecurityIncidents a nusy:Metric ; rdfs:label "Security Incidents"@en .
nusy:Metric-ResponseTime a nusy:Metric ; rdfs:label "Response Time"@en .
nusy:Metric-UserSatisfaction a nusy:Metric ; rdfs:label "User Satisfaction"@en .

# -----------------------------------------------------------------------------
# Plans (Navigation Charts)
# -----------------------------------------------------------------------------

nusy:Plan
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf prov:Plan , kg:Artifact ;
    rdfs:label "Plan"@en ;
    rdfs:comment """Roadmap, sprint plan, or development strategy. Plans specify intended 
    actions and goals over time. Corresponds to 'Navigation Charts' in Santiago PM nautical 
    terminology. Inherits from prov:Plan to support PROV-O provenance patterns (activities 
    hadPlan)."""@en ;
    dcterms:source "santiago-pm/navigation-charts/" ;
    skos:example """
    :sprint-23-plan a nusy:Plan ;
        dcterms:title \"Sprint 23: Authentication Hardening\" ;
        dcterms:description \"Implement MFA and improve login security\" ;
        nusy:plannedFeatures :user-login-feature, :mfa-setup-feature ;
        nusy:plannedExperiments :experiment-mfa-impact ;
        prov:startedAtTime \"2025-01-15T00:00:00Z\"^^xsd:dateTime ;
        prov:endedAtTime \"2025-01-29T00:00:00Z\"^^xsd:dateTime ;
        prov:wasAttributedTo :product-manager ;
        nusy:hasStatus nusy:StatusValue-InProgress .
    """@en .

nusy:plannedFeatures
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Plan ;
    rdfs:range nusy:Feature ;
    rdfs:label "planned features"@en ;
    rdfs:comment "Features included in this plan."@en .

nusy:plannedExperiments
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Plan ;
    rdfs:range nusy:Experiment ;
    rdfs:label "planned experiments"@en ;
    rdfs:comment "Experiments scheduled in this plan."@en .

# -----------------------------------------------------------------------------
# Notes (Captain's Journals)
# -----------------------------------------------------------------------------

nusy:Note
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf kg:Artifact ;
    rdfs:label "Note"@en ;
    rdfs:comment """Knowledge capture with semantic relationships to other notes. Notes 
    represent insights, decisions, learnings, or context. Corresponds to 'Captain's Journals' 
    in Santiago PM nautical terminology. Supports 6 semantic relationship types for building 
    knowledge graphs: relatedTo, follows, references, elaborates, contradicts, supports."""@en ;
    dcterms:source "santiago-pm/captains-journals/" , "santiago-pm/notes-domain-model.md" ;
    skos:example """
    :note-mfa-decision a nusy:Note ;
        dcterms:title \"Decision: Implement MFA using TOTP\" ;
        dcterms:description \"After evaluating SMS vs TOTP vs hardware keys, chose TOTP as best balance of security and UX\" ;
        nusy:relatedTo :note-security-requirements ;
        nusy:supports :user-login-feature ;
        nusy:references :note-nist-guidelines ;
        prov:wasAttributedTo :alice ;
        dcterms:created \"2025-01-10T14:30:00Z\"^^xsd:dateTime ;
        nusy:hasStatus nusy:StatusValue-Closed .
    """@en .

# Note Semantic Relationships (from santiago-pm/notes-domain-model.md)

nusy:relatedTo
    a rdf:Property , owl:ObjectProperty , owl:SymmetricProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "related to"@en ;
    rdfs:comment "Generic semantic connection between notes. Symmetric relationship (if A relatedTo B, then B relatedTo A). Use when relationship doesn't fit more specific types."@en ;
    skos:note "Strength rating can be added via reification or nusy:relationshipStrength property."@en .

nusy:follows
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "follows"@en ;
    rdfs:comment "This note temporally follows another note (B follows A means B came after A in time or sequence)."@en ;
    owl:inverseOf nusy:precededBy .

nusy:precededBy
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "preceded by"@en ;
    rdfs:comment "This note was preceded by another note in time or sequence."@en ;
    owl:inverseOf nusy:follows .

nusy:references
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "references"@en ;
    rdfs:comment "This note cites or refers to another note as source material."@en ;
    owl:inverseOf nusy:referencedBy .

nusy:referencedBy
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "referenced by"@en ;
    rdfs:comment "This note is cited by another note."@en ;
    owl:inverseOf nusy:references .

nusy:elaborates
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "elaborates"@en ;
    rdfs:comment "This note provides more detailed explanation of another note."@en ;
    owl:inverseOf nusy:elaboratedBy .

nusy:elaboratedBy
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "elaborated by"@en ;
    rdfs:comment "This note is explained in more detail by another note."@en ;
    owl:inverseOf nusy:elaborates .

nusy:contradicts
    a rdf:Property , owl:ObjectProperty , owl:SymmetricProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range nusy:Note ;
    rdfs:label "contradicts"@en ;
    rdfs:comment "This note presents conflicting information with another note. Symmetric relationship."@en ;
    skos:note "Useful for tracking evolving understanding or conflicting perspectives."@en .

nusy:supports
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range kg:Artifact ;
    rdfs:label "supports"@en ;
    rdfs:comment "This note provides evidence or reasoning supporting another artifact (note, feature, decision)."@en ;
    owl:inverseOf nusy:supportedBy .

nusy:supportedBy
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain kg:Artifact ;
    rdfs:range nusy:Note ;
    rdfs:label "supported by"@en ;
    rdfs:comment "This artifact is supported by evidence from a note."@en ;
    owl:inverseOf nusy:supports .

nusy:relationshipStrength
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:Note ;
    rdfs:range xsd:decimal ;
    rdfs:label "relationship strength"@en ;
    rdfs:comment "Numeric strength rating for note relationships (0.0-1.0). Used with relatedTo, supports, etc."@en ;
    skos:note "Optional property for weighted knowledge graph queries."@en .

# -----------------------------------------------------------------------------
# Quality Assessments
# -----------------------------------------------------------------------------

nusy:QualityAssessment
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf kg:Artifact ;
    rdfs:label "Quality Assessment"@en ;
    rdfs:comment """Quality gate validation or test result. Assesses artifact quality against 
    defined criteria. Corresponds to 'Quality Assessments' in Santiago PM structure."""@en ;
    dcterms:source "santiago-pm/quality-assessments/" ;
    skos:example """
    :bdd-test-report a nusy:QualityAssessment ;
        dcterms:title \"BDD Test Results - Sprint 23\" ;
        nusy:passRate \"0.95\"^^xsd:decimal ;
        nusy:coveragePercent \"0.92\"^^xsd:decimal ;
        nusy:assessesArtifact :user-login-feature ;
        prov:wasGeneratedBy :test-execution-activity ;
        nusy:hasStatus nusy:StatusValue-Closed .
    """@en .

nusy:passRate
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:QualityAssessment ;
    rdfs:range xsd:decimal ;
    rdfs:label "pass rate"@en ;
    rdfs:comment "Proportion of tests passing (0.0-1.0)."@en .

nusy:coveragePercent
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:QualityAssessment ;
    rdfs:range xsd:decimal ;
    rdfs:label "coverage percent"@en ;
    rdfs:comment "Test coverage as decimal (0.0-1.0)."@en .

nusy:assessesArtifact
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:QualityAssessment ;
    rdfs:range kg:Artifact ;
    rdfs:label "assesses artifact"@en ;
    rdfs:comment "Artifact being quality-assessed."@en .

# ============================================================================
# LAYER 4: STATUS SYSTEM (Universal Tracking)
# ============================================================================
# Based on santiago-pm/tackle/status/status-system.md

nusy:hasStatus
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain kg:Artifact ;
    rdfs:range nusy:StatusValue ;
    rdfs:label "has status"@en ;
    rdfs:comment "Current lifecycle status of artifact."@en .

nusy:StatusValue
    a rdfs:Class , owl:Class ;
    rdfs:label "Status Value"@en ;
    rdfs:comment "Controlled vocabulary for artifact status. Universal across all artifact types."@en .

# Primary status values
nusy:StatusValue-Open
    a nusy:StatusValue ;
    rdfs:label "Open"@en ;
    rdfs:comment "Artifact is created but work has not started."@en .

nusy:StatusValue-InProgress
    a nusy:StatusValue ;
    rdfs:label "In Progress"@en ;
    rdfs:comment "Active work is ongoing on this artifact."@en .

nusy:StatusValue-Blocked
    a nusy:StatusValue ;
    rdfs:label "Blocked"@en ;
    rdfs:comment "Work is blocked by external dependency or issue."@en .

nusy:StatusValue-Closed
    a nusy:StatusValue ;
    rdfs:label "Closed"@en ;
    rdfs:comment "Artifact lifecycle is complete. See stateReason for details."@en .

# Closure reasons (sub-property pattern)
nusy:stateReason
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain kg:Artifact ;
    rdfs:range nusy:StateReason ;
    rdfs:label "state reason"@en ;
    rdfs:comment "Reason for current state, especially for Closed status."@en .

nusy:StateReason a rdfs:Class , owl:Class ;
    rdfs:label "State Reason"@en ;
    rdfs:comment "Controlled vocabulary for status transition reasons."@en .

nusy:StateReason-Completed a nusy:StateReason ; rdfs:label "Completed"@en ;
    rdfs:comment "Work finished successfully."@en .

nusy:StateReason-Cancelled a nusy:StateReason ; rdfs:label "Cancelled"@en ;
    rdfs:comment "Work abandoned or deprioritized."@en .

nusy:StateReason-Duplicate a nusy:StateReason ; rdfs:label "Duplicate"@en ;
    rdfs:comment "Duplicate of another artifact."@en .

nusy:StateReason-NotPlanned a nusy:StateReason ; rdfs:label "Not Planned"@en ;
    rdfs:comment "Will not be implemented."@en .

nusy:StateReason-Transferred a nusy:StateReason ; rdfs:label "Transferred"@en ;
    rdfs:comment "Moved to another system or epic."@en .

# Status transition tracking
nusy:statusTransition
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain kg:Artifact ;
    rdfs:range nusy:StatusTransition ;
    rdfs:label "status transition"@en ;
    rdfs:comment "Records state change history for artifact."@en .

nusy:StatusTransition
    a rdfs:Class , owl:Class ;
    rdfs:label "Status Transition"@en ;
    rdfs:comment "Provenance record of status change with timestamp and agent."@en ;
    rdfs:subClassOf prov:Activity .

nusy:fromStatus a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:StatusTransition ;
    rdfs:range nusy:StatusValue ;
    rdfs:label "from status"@en .

nusy:toStatus a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:StatusTransition ;
    rdfs:range nusy:StatusValue ;
    rdfs:label "to status"@en .

# ============================================================================
# LAYER 5: ROLES AND AGENTS (Crew Manifests)
# ============================================================================
# Combines W3C ORG + PROV-O Role patterns

nusy:AgentRole
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf org:Role , prov:Role ;
    rdfs:label "Agent Role"@en ;
    rdfs:comment """PM-specific role specification combining organizational role (ORG ontology) 
    and provenance role (PROV-O). Corresponds to 'Crew Manifests' in Santiago PM structure. 
    Includes capabilities, responsibilities, and autonomy level."""@en ;
    dcterms:source "santiago-pm/crew-manifests/" ;
    skos:example """
    :pm-role a nusy:AgentRole ;
        rdfs:label \"Product Manager\" ;
        dcterms:description \"Defines vision, prioritizes backlog, tracks experiments\" ;
        nusy:hasCapability :define-vision, :prioritize-backlog, :design-experiment ;
        nusy:autonomyLevel nusy:Autonomy-Master ;
        nusy:knowledgeScope nusy:Scope-Sea .
    """@en .

nusy:hasCapability
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:AgentRole ;
    rdfs:range nusy:PMBehavior ;
    rdfs:label "has capability"@en ;
    rdfs:comment "PM behavior this role is capable of performing."@en .

nusy:autonomyLevel
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:AgentRole ;
    rdfs:range nusy:AutonomyLevel ;
    rdfs:label "autonomy level"@en ;
    rdfs:comment "Degree of autonomous operation (Apprentice, Journeyman, Master, Expert)."@en .

nusy:knowledgeScope
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:AgentRole ;
    rdfs:range nusy:KnowledgeScope ;
    rdfs:label "knowledge scope"@en ;
    rdfs:comment "Knowledge domain coverage (Pond, Lake, Sea, Ocean)."@en .

# Autonomy levels (from MCP capability pattern)
nusy:AutonomyLevel a rdfs:Class , owl:Class ;
    rdfs:label "Autonomy Level"@en ;
    rdfs:comment "Agent capability levels following MCP pattern."@en .

nusy:Autonomy-Apprentice a nusy:AutonomyLevel ; rdfs:label "Apprentice"@en ;
    rdfs:comment "Basic read operations, supervised execution."@en .

nusy:Autonomy-Journeyman a nusy:AutonomyLevel ; rdfs:label "Journeyman"@en ;
    rdfs:comment "CRUD operations, moderate autonomy."@en .

nusy:Autonomy-Master a nusy:AutonomyLevel ; rdfs:label "Master"@en ;
    rdfs:comment "Complex workflows, high autonomy."@en .

nusy:Autonomy-Expert a nusy:AutonomyLevel ; rdfs:label "Expert"@en ;
    rdfs:comment "Strategic planning, full autonomy."@en .

# Knowledge scopes (domain coverage)
nusy:KnowledgeScope a rdfs:Class , owl:Class ;
    rdfs:label "Knowledge Scope"@en ;
    rdfs:comment "Domain knowledge coverage following Santiago fishing terminology."@en .

nusy:Scope-Pond a nusy:KnowledgeScope ; rdfs:label "Pond"@en ;
    rdfs:comment "Single feature/component knowledge."@en .

nusy:Scope-Lake a nusy:KnowledgeScope ; rdfs:label "Lake"@en ;
    rdfs:comment "Epic/module knowledge."@en .

nusy:Scope-Sea a nusy:KnowledgeScope ; rdfs:label "Sea"@en ;
    rdfs:comment "Product-level knowledge."@en .

nusy:Scope-Ocean a nusy:KnowledgeScope ; rdfs:label "Ocean"@en ;
    rdfs:comment "Cross-product/platform knowledge."@en .

# ============================================================================
# LAYER 6: PM BEHAVIORS (MCP Tools)
# ============================================================================
# Based on 20 behaviors identified in santiago-pm ingestion map

nusy:PMBehavior
    a rdfs:Class , owl:Class ;
    rdfs:subClassOf prov:Activity ;
    rdfs:label "PM Behavior"@en ;
    rdfs:comment """Product management activity/capability that can be performed by agents or 
    tools. Behaviors become MCP tool candidates when formalized. Examples: create_feature, 
    prioritize_backlog, design_experiment, track_velocity."""@en ;
    skos:note "Each behavior maps to one or more BDD scenarios in Fishnet-generated features."@en .

# Status Management Behaviors
nusy:PMBehavior-StatusQuery a nusy:PMBehavior ; rdfs:label "Query Status"@en ;
    rdfs:comment "Read current status of artifacts."@en ;
    nusy:capabilityLevel nusy:Autonomy-Apprentice ;
    nusy:mutatesKG false .

nusy:PMBehavior-StatusTransition a nusy:PMBehavior ; rdfs:label "Transition Status"@en ;
    rdfs:comment "Change artifact status with validation."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

# Feature Management Behaviors
nusy:PMBehavior-CreateFeature a nusy:PMBehavior ; rdfs:label "Create Feature"@en ;
    rdfs:comment "Author new BDD feature specification."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

nusy:PMBehavior-PrioritizeBacklog a nusy:PMBehavior ; rdfs:label "Prioritize Backlog"@en ;
    rdfs:comment "Order features by value/urgency."@en ;
    nusy:capabilityLevel nusy:Autonomy-Master ;
    nusy:mutatesKG true .

nusy:PMBehavior-DefineAcceptanceCriteria a nusy:PMBehavior ; rdfs:label "Define Acceptance Criteria"@en ;
    rdfs:comment "Specify feature completion conditions."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

# Issue Tracking Behaviors
nusy:PMBehavior-LogIssue a nusy:PMBehavior ; rdfs:label "Log Issue"@en ;
    rdfs:comment "Create new issue/bug report."@en ;
    nusy:capabilityLevel nusy:Autonomy-Apprentice ;
    nusy:mutatesKG true .

nusy:PMBehavior-LinkIssueToFeature a nusy:PMBehavior ; rdfs:label "Link Issue to Feature"@en ;
    rdfs:comment "Associate issue with related feature."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

# Experiment Management Behaviors
nusy:PMBehavior-DesignExperiment a nusy:PMBehavior ; rdfs:label "Design Experiment"@en ;
    rdfs:comment "Create hypothesis-driven experiment plan."@en ;
    nusy:capabilityLevel nusy:Autonomy-Master ;
    nusy:mutatesKG true .

nusy:PMBehavior-RecordExperimentResults a nusy:PMBehavior ; rdfs:label "Record Experiment Results"@en ;
    rdfs:comment "Capture experiment metrics and outcomes."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

# Knowledge Capture Behaviors
nusy:PMBehavior-CreateNote a nusy:PMBehavior ; rdfs:label "Create Note"@en ;
    rdfs:comment "Capture insight, decision, or context."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

nusy:PMBehavior-LinkRelatedNotes a nusy:PMBehavior ; rdfs:label "Link Related Notes"@en ;
    rdfs:comment "Create semantic relationships between notes."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

# Strategic Planning Behaviors
nusy:PMBehavior-DefineVision a nusy:PMBehavior ; rdfs:label "Define Vision"@en ;
    rdfs:comment "Articulate product strategy and goals."@en ;
    nusy:capabilityLevel nusy:Autonomy-Expert ;
    nusy:mutatesKG true .

nusy:PMBehavior-CreateRoadmap a nusy:PMBehavior ; rdfs:label "Create Roadmap"@en ;
    rdfs:comment "Plan features across time horizons."@en ;
    nusy:capabilityLevel nusy:Autonomy-Master ;
    nusy:mutatesKG true .

# Quality Assessment Behaviors
nusy:PMBehavior-RunQualityGate a nusy:PMBehavior ; rdfs:label "Run Quality Gate"@en ;
    rdfs:comment "Execute quality validation checks."@en ;
    nusy:capabilityLevel nusy:Autonomy-Journeyman ;
    nusy:mutatesKG true .

# Behavior metadata properties
nusy:capabilityLevel
    a rdf:Property , owl:ObjectProperty ;
    rdfs:domain nusy:PMBehavior ;
    rdfs:range nusy:AutonomyLevel ;
    rdfs:label "capability level"@en ;
    rdfs:comment "Minimum autonomy level required to perform this behavior."@en .

nusy:mutatesKG
    a rdf:Property , owl:DatatypeProperty ;
    rdfs:domain nusy:PMBehavior ;
    rdfs:range xsd:boolean ;
    rdfs:label "mutates KG"@en ;
    rdfs:comment "Whether behavior modifies knowledge graph (true) or is read-only (false)."@en .

# ============================================================================
# METADATA ALIGNMENT WITH STANDARDS
# ============================================================================
# Prefer DCMI properties for common metadata (don't reinvent)

# Recommended properties from dcterms namespace:
# - dcterms:title (instead of custom nusy:title)
# - dcterms:description (instead of custom nusy:description)
# - dcterms:created (instead of custom nusy:createdAt)
# - dcterms:modified (instead of custom nusy:updatedAt)
# - dcterms:creator (instead of custom nusy:createdBy)
# - dcterms:identifier (for artifact IDs)
# - dcterms:type (for artifact typing)

# Recommended properties from prov namespace:
# - prov:wasGeneratedBy (activity that created artifact)
# - prov:wasDerivedFrom (derivation chains)
# - prov:wasAttributedTo (attribution to agents)
# - prov:used (resources used by activities)
# - prov:startedAtTime, prov:endedAtTime (temporal bounds)

# ============================================================================
# EXTENSIONS AND AGILE CONCEPTS (Future)
# ============================================================================
# Placeholder for agile-specific vocabulary to be extracted from knowledge base

nusy:Sprint rdfs:subClassOf nusy:Plan ;
    rdfs:label "Sprint"@en ;
    rdfs:comment "Time-boxed iteration (typically 2 weeks)."@en ;
    skos:note "To be fully defined after Catchfish extraction from agile docs."@en .

nusy:UserStory rdfs:subClassOf nusy:Feature ;
    rdfs:label "User Story"@en ;
    rdfs:comment "Feature expressed in 'As a [role] I want [goal] so that [benefit]' format."@en ;
    skos:note "To be fully defined after Catchfish extraction from agile docs."@en .

nusy:StoryPoints
    a nusy:Metric ;
    rdfs:label "Story Points"@en ;
    rdfs:comment "Relative effort estimation metric."@en .

nusy:Velocity
    a nusy:Metric ;
    rdfs:label "Velocity"@en ;
    rdfs:comment "Story points completed per sprint."@en .

# ============================================================================
# OWL CONSTRAINTS AND VALIDATION RULES
# ============================================================================

# Domain/range constraints enforce proper usage
# Cardinality constraints can be added for required properties:

# Example: Every Feature must have at least one acceptance criterion
# (This is comment-only; full OWL validation requires SHACL shapes)
# nusy:Feature rdfs:subClassOf [
#     a owl:Restriction ;
#     owl:onProperty nusy:acceptanceCriteria ;
#     owl:minCardinality 1
# ] .

# Example: Status transitions must specify both fromStatus and toStatus
# nusy:StatusTransition rdfs:subClassOf [
#     a owl:Restriction ;
#     owl:onProperty nusy:fromStatus ;
#     owl:cardinality 1
# ] .

# ============================================================================
# USAGE EXAMPLES
# ============================================================================

# See individual class definitions for skos:example annotations
# Full scenario examples can be found in santiago-pm-self-aware demo (Task 16)

# Example SPARQL query: Find all features in progress
# PREFIX nusy: <https://nusy.ai/pm#>
# SELECT ?feature ?title WHERE {
#     ?feature a nusy:Feature ;
#              dcterms:title ?title ;
#              nusy:hasStatus nusy:StatusValue-InProgress .
# }

# Example SPARQL query: Find note chains via follows relationship
# PREFIX nusy: <https://nusy.ai/pm#>
# SELECT ?note1 ?note2 WHERE {
#     ?note1 a nusy:Note ;
#            nusy:follows+ ?note2 .
# }

# ============================================================================
# LAYER 7: WORKFLOW ORCHESTRATION (Passages)
# ============================================================================

# Passage: Multi-step workflow coordinating actors, triggers, transitions, quality gates
nusy:Passage a rdfs:Class ;
    rdfs:subClassOf kg:Artifact ;
    rdfs:label "Passage" ;
    rdfs:comment """A structured multi-step process (workflow) that coordinates actors, 
    triggers, transitions, and quality gates. Passages can be team (human), agent (AI), 
    hybrid (human+AI), or integration (system) workflows."""@en ;
    skos:example """A tackle development passage: Human defines spec → Agent generates code 
    → Human reviews → Agent writes tests → Quality gate validates → Deploy.""" .

# Passage execution instance
nusy:PassageExecution a rdfs:Class ;
    rdfs:subClassOf prov:Activity ;
    rdfs:label "Passage Execution" ;
    rdfs:comment """A specific execution instance of a passage with runtime state, 
    step history, and produced artifacts. Tracks passage execution from pending to 
    completed/failed/cancelled."""@en .

# Passage step (individual activity)
nusy:PassageStep a rdfs:Class ;
    rdfs:label "Passage Step" ;
    rdfs:comment """Individual activity or decision point within a passage. 
    Types: task, decision, approval, automated. Each step is performed by an actor."""@en .

# Passage actor (human, agent, or system)
nusy:PassageActor a rdfs:Class ;
    rdfs:label "Passage Actor" ;
    rdfs:comment """Human, agent, or system that performs passage steps. 
    Types: human (product manager, developer), agent (Santiago, Copilot), 
    system (CI/CD, deployment pipeline)."""@en .

# Passage structure properties
nusy:hasCategory a rdf:Property ;
    rdfs:domain nusy:Passage ;
    rdfs:range xsd:string ;
    rdfs:label "has category" ;
    rdfs:comment "Passage category: team, agent, hybrid, integration" .

nusy:hasTrigger a rdf:Property ;
    rdfs:domain nusy:Passage ;
    rdfs:label "has trigger" ;
    rdfs:comment "Event, schedule, or manual trigger that initiates passage execution" .

nusy:hasStep a rdf:Property ;
    rdfs:domain nusy:Passage ;
    rdfs:range nusy:PassageStep ;
    rdfs:label "has step" ;
    rdfs:comment "Step within the passage sequence" .

nusy:hasActor a rdf:Property ;
    rdfs:domain nusy:Passage ;
    rdfs:range nusy:PassageActor ;
    rdfs:label "has actor" ;
    rdfs:comment "Actor assigned to perform passage steps" .

nusy:hasTransition a rdf:Property ;
    rdfs:domain nusy:PassageStep ;
    rdfs:range nusy:PassageStep ;
    rdfs:label "has transition" ;
    rdfs:comment "Conditional transition between steps (e.g., 'on success', 'on failure')" .

nusy:hasQualityGate a rdf:Property ;
    rdfs:domain nusy:PassageStep ;
    rdfs:label "has quality gate" ;
    rdfs:comment "Validation criteria that must be met at this step before proceeding" .

# Passage execution properties
nusy:instanceOf a rdf:Property ;
    rdfs:domain nusy:PassageExecution ;
    rdfs:range nusy:Passage ;
    rdfs:label "instance of" ;
    rdfs:comment "The passage definition this execution instantiates" .

nusy:executionState a rdf:Property ;
    rdfs:domain nusy:PassageExecution ;
    rdfs:range xsd:string ;
    rdfs:label "execution state" ;
    rdfs:comment "Current execution state: pending, running, waiting, completed, failed, cancelled" .

nusy:stepHistory a rdf:Property ;
    rdfs:domain nusy:PassageExecution ;
    rdfs:label "step history" ;
    rdfs:comment "Ordered record of completed steps with timestamps and results" .

nusy:currentStep a rdf:Property ;
    rdfs:domain nusy:PassageExecution ;
    rdfs:range nusy:PassageStep ;
    rdfs:label "current step" ;
    rdfs:comment "The step currently being executed (if state is 'running')" .

nusy:completionPercentage a rdf:Property ;
    rdfs:domain nusy:PassageExecution ;
    rdfs:range xsd:float ;
    rdfs:label "completion percentage" ;
    rdfs:comment "Execution progress as a percentage (0.0 to 1.0)" .

nusy:produced a rdf:Property ;
    rdfs:domain nusy:PassageExecution ;
    rdfs:range kg:Artifact ;
    rdfs:label "produced" ;
    rdfs:comment "Artifacts generated by passage execution (features, code, reports, etc.)" .

# Mermaid visualization support
nusy:mermaidDiagram a rdf:Property ;
    rdfs:domain nusy:Passage ;
    rdfs:range xsd:string ;
    rdfs:label "mermaid diagram" ;
    rdfs:comment "Mermaid flowchart representation of passage structure for visualization" .

# PM Behaviors for Passage Orchestration (8 new behaviors)
nusy:PMBehavior-DefinePassage a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Define Passage" ;
    rdfs:comment "Create YAML-based passage definition with actors, steps, triggers, transitions" .

nusy:PMBehavior-ValidatePassage a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Validate Passage" ;
    rdfs:comment "Check passage for completeness, consistency, reachability, termination" .

nusy:PMBehavior-GeneratePassageDiagram a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Generate Passage Diagram" ;
    rdfs:comment "Generate Mermaid flowchart from passage YAML" .

nusy:PMBehavior-ExecutePassage a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Execute Passage" ;
    rdfs:comment "Orchestrate multi-step passage execution with state management" .

nusy:PMBehavior-MonitorPassageExecution a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Monitor Passage Execution" ;
    rdfs:comment "Track execution status, step history, completion percentage" .

nusy:PMBehavior-CoordinateMCPInvocation a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Coordinate MCP Invocation" ;
    rdfs:comment "Invoke MCP endpoints from passage steps, capture tool results" .

nusy:PMBehavior-AnalyzePassagePerformance a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Analyze Passage Performance" ;
    rdfs:comment "Aggregate metrics (duration, success rate, bottlenecks)" .

nusy:PMBehavior-ManagePassageLifecycle a rdfs:Class ;
    rdfs:subClassOf nusy:PMBehavior ;
    rdfs:label "Manage Passage Lifecycle" ;
    rdfs:comment "Transition passages through lifecycle (draft → active → deprecated → archived)" .

# ============================================================================
# VERSION HISTORY
# ============================================================================

# 1.1.0 (2025-11-16): Workflow orchestration extension
#   - Layer 7: Passage orchestration (4 classes, 13 properties)
#   - 8 new PM behaviors for passage management
#   - Support for team, agent, hybrid, integration workflows
#   - Mermaid diagram generation support
#   - MCP tool coordination from passages
#   - Passage lifecycle management

# 1.0.0 (2025-01-16): Initial release
#   - Core artifact types (Feature, Issue, Experiment, Plan, Note, Quality Assessment)
#   - Universal status system (Open, InProgress, Blocked, Closed + reasons)
#   - Note semantic relationships (6 types)
#   - PM behaviors (14 defined, 6 placeholder)
#   - Role and autonomy levels
#   - Full PROV-O, ORG, DCMI integration
