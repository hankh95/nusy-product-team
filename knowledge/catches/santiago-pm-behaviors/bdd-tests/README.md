# Santiago PM BDD Test Suite

**Generated by**: Fishnet v2.0.0  
**Strategy**: BottomUp (Document-Driven)  
**Generation Date**: 2025-11-17  
**Total Files**: 28 feature files  
**Total Scenarios**: 84 scenarios (28 behaviors × 3 scenarios each)

## Overview

This directory contains BDD (Behavior-Driven Development) test specifications for all Santiago PM behaviors. The test files are written in Gherkin syntax and generated automatically from the behavior extraction files.

## Source Files

- **Primary**: `knowledge/catches/santiago-pm-behaviors/pm-behaviors-extracted.md` (20 behaviors)
- **Secondary**: `knowledge/catches/santiago-pm-behaviors/passage-behaviors-extracted.md` (8 behaviors)
- **Ontology**: `knowledge/ontologies/pm-domain-ontology.ttl`

## Test Coverage

### By Category
- Status Management: 3 behaviors, 9 scenarios
- Feature Management: 5 behaviors, 15 scenarios
- Issue Tracking: 2 behaviors, 6 scenarios
- Experiment Management: 3 behaviors, 9 scenarios
- Knowledge Capture: 3 behaviors, 9 scenarios
- Strategic Planning: 2 behaviors, 6 scenarios
- Quality Assurance: 2 behaviors, 6 scenarios
- Passage System: 8 behaviors, 24 scenarios

### By Scenario Type
Each behavior has 3 scenarios:
- **Happy Path** (@happy_path): Valid inputs → expected outputs
- **Edge Cases** (@edge_case): Boundary values, optional parameters
- **Error Handling** (@error_handling): Invalid inputs → error responses

### By Capability Level
- **@apprentice**: 3 behaviors (read-only, supervised)
- **@journeyman**: 15 behaviors (standard operations)
- **@master**: 9 behaviors (complex operations)
- **@expert**: 1 behavior (domain innovation)

### By Knowledge Scope
- **@pond**: 3 behaviors (single task/feature)
- **@lake**: 15 behaviors (feature set)
- **@sea**: 9 behaviors (domain scope)
- **@ocean**: 1 behavior (cross-domain)

## File Structure

Each `.feature` file contains:
1. **Provenance Header** - Generation metadata and strategy used
2. **Tags** - Capability level and knowledge scope
3. **Feature** - Behavior name and description
4. **Background** - Common setup steps for all scenarios
5. **Scenarios** - Three test scenarios per behavior

### Example: `status_query.feature`

```gherkin
# Generated by Fishnet v2.0.0
# Strategy: BottomUp
# Source: pm-behaviors-extracted.md

@apprentice @pond
Feature: status_query
  Query artifacts by status, assignee, update date, or artifact type

  Background:
    the Santiago PM MCP service is running
    the knowledge graph is initialized with test data
    I have Apprentice level permissions

  @happy_path
  Scenario: Successfully execute status_query
    Given the Santiago PM knowledge graph is initialized
    When I invoke the 'status_query' MCP tool
    Then the MCP tool should succeed

  @edge_case
  Scenario: Handle edge cases for status_query
    ...

  @error_handling
  Scenario: Handle errors for status_query
    ...
```

## Validation

These test files follow standard Gherkin syntax and can be validated with:

```bash
# Syntax validation only (no step implementations required)
behave --dry-run knowledge/catches/santiago-pm-behaviors/bdd-tests/
```

## Regeneration

To regenerate these files:

```bash
python nusy_orchestrator/santiago_builder/fishnet.py \
  --behaviors knowledge/catches/santiago-pm-behaviors/pm-behaviors-extracted.md \
  --ontology knowledge/ontologies/pm-domain-ontology.ttl \
  --output knowledge/catches/santiago-pm-behaviors/bdd-tests/ \
  --strategies bottom_up
```

## Usage

These BDD specifications serve as:
1. **Contract Tests** - Define expected behavior of MCP tools
2. **Documentation** - Human-readable behavior specifications
3. **Test Generation** - Templates for implementing actual test code
4. **Traceability** - Link behaviors to knowledge graph nodes

## Next Steps

1. **Implement Step Definitions** - Create Python step implementations for behave
2. **Add Test Data** - Create fixtures for common test scenarios
3. **CI Integration** - Add BDD tests to continuous integration pipeline
4. **Coverage Analysis** - Track which behaviors are fully tested

## Related Documentation

- Architecture: `docs/architecture/fishnet-architecture.md`
- Behavior Extraction: `knowledge/catches/santiago-pm-behaviors/pm-behaviors-extracted.md`
- Ontology: `knowledge/ontologies/pm-domain-ontology.ttl`
- Test Implementation: `tests/test_fishnet.py`
