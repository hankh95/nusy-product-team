# Folder Layout Proposal — Combined Hybrid v3 Plan

This layout encodes the factory pattern: fake team proxies, factory components, and generated Santiagos with provenance and tests.

---

## Proposed Directory Tree

```text
knowledge/
├── catches/index.yaml         # Trust registry for all catches
├── catches/                    # Generated Santiagos (factory outputs)
│   └── santiago-pm-safe-xp/
│       ├── domain-knowledge/   # Markdown + YAML extracted from sources
│       ├── bdd-tests/          # Feature files from Fishnet
│       ├── mcp-manifest.json   # Auto-generated
│       └── provenance.yaml     # Fishing expedition metadata
├── templates/                  # Base structures for generating Santiagos
└── proxy-instructions/         # Role definitions for fake team
    ├── pm-role.md
    ├── architect-role.md
    ├── developer-role.md
    ├── qa-role.md
    ├── ux-role.md
    ├── platform-role.md
    └── ethicist-role.md

santiago_core/
├── agents/
│   ├── _proxy/                 # Phase 0: Fake team (MCP proxies)
│   │   ├── pm_proxy.py
│   │   ├── architect_proxy.py
│   │   ├── developer_proxy.py
│   │   ├── qa_proxy.py
│   │   ├── ux_proxy.py
│   │   ├── platform_proxy.py
│   │   └── ethicist_proxy.py
│   └── santiago-pm-safe-xp/    # Phase 2+: Real Santiagos (factory-generated)
│       └── service/            # MCP service implementation
└── ...

nusy_orchestrator/
└── santiago_builder/           # Factory components
    ├── navigator.py            # Orchestrates fishing expeditions
    ├── catchfish.py            # Knowledge extraction (30–60m → <15m)
    └── fishnet.py              # BDD test generation + manifest inference
```

---

## Mapping Table (Current → Target → Action)

- Current: `ocean-research/fake_team_pack/` → Target: `santiago_core/agents/_proxy/` → Action: Implement proxies using patterns from pack
- Current: `santiago-pm/strategic-charts/Old man and the sea.md` → Target: `nusy_orchestrator/santiago_builder/navigator.py` → Action: Encode 10-step process and validation loops
- Current: `nusy_prototype/` → Target: `nusy_orchestrator/santiago_builder/catchfish.py` → Action: Extract 4-layer pipeline concepts; implement generalized extractor
- Current: `santiago-pm/voyage-trials/` → Target: `knowledge/catches/*/bdd-tests/` → Action: Generate BDD via Fishnet; align with existing style
- Current: `santiago_core/` (service scaffolds) → Target: `santiago_core/agents/santiago-*/service/` → Action: House real MCP services generated by factory
- Current: (missing) → Target: `knowledge/` (all subdirs) → Action: Create new structure; enforce schema + provenance
- Current: (missing) → Target: `nusy_orchestrator/santiago_builder/` → Action: Add Navigator, Catchfish, Fishnet modules
- Current: `src/nusy_pm_core/` (legacy) → Target: (reference only) → Action: Deprecate; do not refactor into factory
- Current: `santiago-code/` (archived) → Target: (reference only) → Action: Preserve for context; avoid duplication

---

## Notes

- `knowledge/catches/index.yaml` will serve as a trust registry; include entries for each caught Santiago with version, hash, and validation status.
- MCP manifests are generated by Fishnet and co-located under each catch folder; services consume them on deploy.
- Orchestrator will route requests to proxies or real Santiagos based on replacement status and budgets.
